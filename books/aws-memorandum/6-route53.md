---
title: "Route53"
---

# Route53とは？

ドメイン名(例: www.example.com)をIPアドレスに変換するサービス。
ドメイン名を使って、AWSサービスへ接続できるようにする。
例えば、ロードバランサのエイリアスをRoute53で指定することで、ドメイン名の割り当てができる。
(sample-dev-elb ⇔ elb.example.com)

# DNS(Domain Name System)とは？
- IPアドレスとドメイン名を対応付けするシステム。
- DNSサーバは、ドメイン名をIPアドレスに変換する機能を持つ。
- 世界中全てのドメイン名を1台のDNSサーバで管理できないので、そのドメイン名を知っているであろう別のDNSサーバの情報も登録している。

# ドメイン名からIPアドレスを取得する流れ
1. DNSサーバは、自身のNSレコードを参照し、上位DNSサーバに問い合わせる。
2. 上位DNSサーバは、自身のAレコードを参照し、ローカルマシンにドメイン名に対応するIPアドレスを返す。

# DNSの各レコード
- NSレコード
  - ドメイン情報を保持しているDNSサーバ名の定義
- Aレコード
  - ドメインをIPアドレスに変換する定義
- CNAMEレコード
  - ドメインを別ドメインに置き換える定義 (別名みたいなもの)

# お名前ドットコムとRoute53での登録

## お名前ドットコムでドメインを購入
- お名前ドットコムで、Whoisは登録したほうが良い。
  - お名前ドットコムを盾にし、個人情報を秘匿できる。

## Route53の初期設定
1. ホストゾーンの作成
- ドメイン名: <お名前ドットコムで購入したドメイン名>
- タイプ: パブリックホストゾーン
- 「ホストゾーンの作成」
2. NSレコードとSOAレコードが作成されたことを確認

## お名前ドットコムでAWSのDNSサーバを登録
1. 「ドメイン」タブを開き、ドメイン一覧から購入したドメイン名をクリック。
2. 「ドメイン詳細」の「ドメイン機能一覧」をクリック。
3. 「ネームサーバー/DNSの設定」 - 「ネームサーバーの変更」をクリック。
4. 購入したドメイン名をチェックし、「ほかのネームサーバーを利用」を選択。
5. Route53のNSレコードの値4つをネームサーバーとして登録。

## Route53でELBのルーティングを登録
1. Route53の「ホストゾーン」を開き、「レコードを作成」
2. 「ルーティングポリシー」に「シンプルルーティング」を選択し、「次へ」
3. 「シンプルなレコードを定義」
- レコード名：`elb` (任意)
- レコードタイプ：A
- 値/トラフィックのルーティング先：
  - Application Load BalancerとClassic Load Balancerへのエイリアス
  - リージョン：アジアパシフィック（東京）
  - ロードバランサー：作成したALB
4. ブラウザで、`http://elb.[購入したドメイン]`が開けるか確認
